function createCookie(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/",$(".close").closest("#update-info").css("display","none")}function readCookie(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return null}var isIE=function(){var a=document.createElement("div");return a.innerHTML="<!--[if lt IE 9]><marquee></marquee><![endif]-->",1===a.getElementsByTagName("marquee").length}();$(document).ready(function(){function p(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){a[c]=d});return a}function p(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){a[c]=d});return a}function y(a){return $(a).find("tbody").find("tr").length}if("prevent"!==readCookie("noPreview")){console.log("Showing reminder banner");var b='<div id="update-info" class="alert alert-info"> <h2>Have you updated your account in Document Delivery?</h2> <p>Email, address, and phone number changes in Banner don&#8217;t affect your Document Delivery account. Please take a moment to <a href="https://gvsu.illiad.oclc.org/illiad/illiad.dll?Action=10&Form=81">update your information now</a>.</p> <ul style="list-style: none; margin-top: 1em; margin-left: 0;"> <li style="float: left;"><a href="https://gvsu.illiad.oclc.org/illiad/illiad.dll?Action=10&Form=81" class="btn btn-primary" id="gvsu-preview">Review my account</a></li> <li style="float: right;"><a href="#" onclick="createCookie(\'noPreview\',\'prevent\',7)" class="btn btn-default close">No thanks</a></li> </ul><div style="clear:both;"</div></div>';$("#main").prepend(b)}else console.log("Cookie preventing reminder banner.");$("option:contains('LIB')").text("Mary Idema Pew Library @ Allendale"),$("option:contains('STEEL')").text("Steelcase Library @ DeVos"),$("option:contains('AWRI')").text("Annis Water Research Institute"),$("option:contains('FREY')").text("Frey Learning Center @ CHS"),$("option:contains('OCS')").text("Ship books to me"),$("option:contains('VARI')").text("VanAndel Research Institute"),$("option:contains('ILL')").text("Please choose a location");var c=$("select#NVTGC").val();if("OCS"!=c&&($(".illiad-mailing-address").hide(),$("#NVTGC").change(function(){$(".illiad-mailing-address").toggle("OCS"==$(this).val())})),$("#transactionMenu a.menuEdit:last").click(function(){return!!confirm("Are you sure you want to cancel this request?")&&void alert("Your request has been cancelled.")}),$(".lib-table table tbody tr td a").addClass("editlink"),$(".lib-table table tbody tr td a:contains('Delete')").removeClass("editlink").addClass("delete-link"),$(".lib-table table tbody tr td a:contains('View')").removeClass("editlink").addClass("view-link"),$(".lib-table table:contains('Checked Out Items') th:contains('Due Date')").text("Due"),$(".lib-table table:contains('Checked Out Items') td:contains('Checked Out to Customer')").text("Checked Out"),$(".lib-table table:contains('Outstanding Requests')").find("a").each(function(){var a=$(this).text();$(this).text("Show ("+a+")")}),$("a.menuEdit:contains('Cancel')").css("color","red").css("display","block").css("float","right"),$("a.delete-link").click(function(){return!!confirm("Are you sure you want to delete this item?")&&void alert("Your article has been deleted.")}),$(".statusNormal").length>0){var d=$(".statusNormal").text();"Choose an option from the choices below."===d||"Enter information below and press the Submit Information button to send."===d||"When Finished Editing, press the Submit Information button below."===d?$(".statusNormal").hide():$(".statusNormal").addClass("alert").addClass("alert-warning").find("font").removeAttr("color")}if($(".statusInformation").length>0){var d=$(".statusInformation").text(),e=d.split(" ");"Request"==e[1]&&"Received."==e[2]&&e[!1]?$(".statusInformation").html("<b>Got it!</b> Most articles come in 1-3 days. We&#8217;ll let you know when it&#8217;s here."):$(".statusInformation").html("<b>Got it!</b> Loans from other libraries can take 1-2 weeks. We&#8217;ll let you know when it&#8217;s here.")}if($(".statusNormal").length>0&&"There can be no further renewals."==$(".statusNormal:last-child").text()){var f=$(".statusNormal:first-child").text(),g=f.split(" "),h=g[7];$(".statusNormal").hide();var i='<p class="alert alert-success" style="margin-bottom: 0;"><b>Got it!</b> We&#8217;ll ask the library we borrowed this from if you can have it until <b>'+h+"</b><br />They probably will. We&#8217;ll email you only if they need it back now.</p>";$("#status").prepend(i)}if(0==isIE){$(".how-to-renew-items").hide();$(".lib-table").find("table:contains('Checked Out Items')").find("a").each(function(a){var b=$(this).text();$("#renewalHack").load("illiad.dll?Action=10&Form=67&Value="+b+" #renewal-details",function(){var a=$("#renewalHack").find("table td:contains('Renewals Allowed')").next("td").text(),c=$("#renewalHack").find("table td:contains('Due Date')").next("td").text();if($(".lib-table table:contains('Checked Out Items') tbody tr:contains('"+b+"')").find("td:last-child").text(c),"Yes"===$.trim(a)){var d=Date.parse(c);d/=1e3;var e=Math.round((new Date).getTime()/1e3),f=d-e;if(console.log(c),console.log(d),console.log(e),console.log(f),f>691200||f<-691200)console.log("Getting here"),$(".lib-table table:contains('Checked Out Items')").find("a:contains("+b+")").removeClass("editlink").text("Renewals Allowed ("+b+")");else{var g=$("#renewalHack").find("a.menuRenew").attr("href");$(".lib-table table:contains('Checked Out Items')").find("a:contains("+b+")").removeClass("editlink").attr("href",g).attr("id","lib-renew").text("Renew ("+b+")")}}else $(".lib-table table:contains('Checked Out Items')").find("a:contains("+b+")").removeClass("editlink").text("No Renewals ("+b+")")})})}var k=$(".lib-table").find("td:contains('Renewals Allowed')").next("td").text();if("Yes"==k){var l=$(".lib-table").find("table td:contains('Due Date')").next("td").text(),m=Date.parse(l);m/=1e3;var n=Math.round((new Date).getTime()/1e3),o=m-n;o>604800||o<0?($("a.menuRenew:contains('Renew Request')").hide(),$(".lib-table").find("td:contains('Renewals Allowed')").next("td").text("Yes - 7 days before or after Due Date")):$("a.menuRenew:contains('Renew Request')").text("Request Renewal")}if($("#transactionMenu a.menuRenew").click(function(){alert("We&#8217;ll try to renewal this. If the lender says no, we&#8217;ll email you.")}),$("#lib-renew").click(function(){alert("We&#8217;ll try to renewal this. If the lender says no, we&#8217;ll email you.")}),$(".row-header:contains('Transaction Information')").length>0){var q=p().Value;$(".row-header:contains('Transaction Information')").find("th").text("Details for Transaction No. "+q),$(".statusNormal").hide()}if($(".row-header:contains('Request Information')").length>0){var q=p().Value;$(".row-header:contains('Request Information')").find("th").text("Details for Transaction No. "+q),$(".statusNormal").hide()}if($("#main_menu").length>0){var s,t,u,r=0;$("#electronic-articles").length>0&&"No Electronic Articles Received"==$("#electronic-articles").find(".row-message").find("td").text()&&(r+=1,s=0,$("#electronic-articles").hide()),$("#outstanding-requests").length>0&&"No Requests"==$("#outstanding-requests").find(".row-message").find("td").text()&&(r+=1,t=0,$("#outstanding-requests").hide()),$("#checkedout-items").length>0&&"No Items"==$("#checkedout-items").find(".row-message").find("td").text()&&(r+=1,u=0,$("#checkedout-items").hide()),3==r?$("#main").prepend('<h2>You have no requests</h2><p>Document Delivery can get you electronic copies of articles and book chapters that <abbr title="Grand Valley State University">GVSU</abbr> doesn&#8217;t have online in a few days, or borrow books and more from other libraries, usually within a week.</p><p><div><a href="https://gvsu.illiad.oclc.org/illiad/illiad.dll?Action=10&amp;Form=22" class="btn btn-primary btn-lg">Request an Item Now</a></div></p><p><small>Need a book fast? <a href="http://elibrary.mel.org/search">Get it directly from another Michigan Library.</a></small></p>'):(0==s?(totalArticles=0,articleLabel="Electronic Articles"):(totalArticles=y("#electronic-articles"),articleLabel='<a href="#electronic-articles">Electronic Articles</a>'),0==t?(totalRequests=0,requestLabel="Outstanding Requests"):(totalRequests=y("#outstanding-requests"),requestLabel='<a href="#outstanding-requests">Outstanding Requests</a>'),0==u?(totalBooks=0,bookLabel="Checked Out Items"):(totalBooks=y("#checkedout-items"),bookLabel='<a href="#checkedout-items">Checked Out Items</a>'),$("#main").prepend('<style>.dashboard-graph ul { list-style:none;margin:0 !important;padding:0}.dashboard-graph ul li { padding: .8em 1%; border-bottom: 1px solid #bbb; font-size: 1.1em; margin: 0;} .dashboard-graph b { display: inline-block; width: 75%; } .dashboard-graph span.number { display: inline-block; width: 20%; } .dashboard-graph span.graph { display:inline-block;width: 60%; } .dashboard-graph span.chart { display:inline-block; background-color: #069; height: 100%; } .dashboard-graph ul li:first-child { border-top: 1px solid #bbb; }.dashboard-graph ul li:nth-of-type(even) { background-color: #eee; }</style><div class="line"><h3 style="margin-bottom: 0;">Your Document Delivery</h3><div class="row"><div class="dashboard-graph span2"><ul><li><b>'+articleLabel+':</b> <span class="number">'+totalArticles+"</span></li><li><b>"+requestLabel+':</b> <span class="number">'+totalRequests+"</span></li><li><b>"+bookLabel+':</b> <span class="number">'+totalBooks+'</span></li></ul></div><div class="span1" style="text-align: right;"><div style="margin-right: 5%;"><p>Need something? We&#8217;ll get it for you!</p><p><a href="illiad.dll?Action=10&amp;Form=22" class="btn btn-lg btn-primary">Request an Item Now</a></p></div></div></div></div>'))}});var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-2700108-12"]),_gaq.push(["_trackPageview"]),function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}();
